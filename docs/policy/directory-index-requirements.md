# Directory Index Requirements Policy

## Purpose

This policy mandates the presence of an index.md file in every folder under
the docs/ and scripts/ directories to ensure consistent navigation,
discoverability, and documentation quality across the repository.

## Scope

This policy applies to:

- All folders (directories) under the `docs/` directory
- All folders (directories) under the `scripts/` directory
- All contributors who create new folders or modify existing folder structures
- Automated documentation tools and workflows

This policy does not apply to:

- Hidden directories (starting with `.`)
- Build artifact directories (e.g., `node_modules`, `vendor`, `dist`, `build`)
- Individual files (only directories require index.md)
- Root-level directories outside of `docs/` and `scripts/`

## Policy Statement

Every folder within the `docs/` and `scripts/` directories MUST contain an
`index.md` file that catalogs the contents of that folder. This ensures that
users can navigate the documentation and scripts hierarchically and understand
the purpose and contents of each directory.

## Index File Requirements

### Mandatory Contents

Each `index.md` file MUST contain:

1. **Title** - A descriptive title indicating the folder path
   (e.g., "Docs Index: /docs/policy/security")

2. **Purpose Section** - A brief description of the folder's purpose and what
   types of content it contains

3. **Subfolders Section** - If the folder contains subdirectories, list them
   with links to their respective `index.md` files:
   ```markdown
   ## Subfolders
   
   - [subfolder-name/](./subfolder-name/index.md)
   ```

4. **Documents/Files Section** - List all immediate child markdown files
   (for docs/) or script files (for scripts/) with links:
   ```markdown
   ## Documents
   
   - [document-name](./document-name.md)
   ```
   
   or for scripts:
   ```markdown
   ## Scripts
   
   - [script-name](./script-name.py) - Brief description
   ```

5. **Metadata Section** - Document metadata including:
   - Document Type: index
   - Auto-generated status (if applicable)
   
   ```markdown
   ## Metadata
   
   - **Document Type:** index
   - **Auto-generated:** This file is automatically generated by
     rebuild_indexes.py
   ```

### Optional Contents

Index files MAY include:

- Extended descriptions of folder contents
- Usage guidelines for scripts
- Grouping of related documents
- Cross-references to related documentation
- Revision history

### Structure Example

```markdown
# Docs Index: /docs/policy/security

## Purpose

This folder contains security policies, standards, and procedures that govern
security practices across the organization.

## Subfolders

- [scanning/](./scanning/index.md)
- [access-control/](./access-control/index.md)

## Documents

- [security-policy](./security-policy.md)
- [incident-response](./incident-response.md)
- [vulnerability-management](./vulnerability-management.md)

## Metadata

- **Document Type:** index
- **Auto-generated:** This file is automatically generated by
  rebuild_indexes.py

## Revision History

| Change | Notes | Author |
| --- | --- | --- |
| Automated update | Generated by documentation index automation |
  rebuild_indexes.py |
```

## Automation

### Automated Generation

The `scripts/docs/rebuild_indexes.py` script automatically generates and
maintains `index.md` files for all folders under `docs/`.

To regenerate all documentation indexes:

```bash
python3 scripts/docs/rebuild_indexes.py --root docs
```

To check if indexes need updating (useful in CI):

```bash
python3 scripts/docs/rebuild_indexes.py --root docs --check
```

### CI/CD Integration

The rebuild_docs_indexes.yml workflow automatically:

- Runs on push to main, dev/**, and rc/** branches
- Regenerates all index.md files
- Commits and pushes changes if indexes are outdated
- Runs on a weekly schedule to catch any drift

### Manual Index Files

While automated generation is preferred, manual index.md files are permitted
when:

1. Custom organization or grouping is needed
2. Additional context or descriptions enhance usability
3. The folder contains scripts/ content requiring human-written descriptions

Manual index files SHOULD follow the same structure as auto-generated files
but MAY include additional sections as needed.

## Enforcement

### Pre-commit Validation

Contributors SHOULD run the index check before committing:

```bash
python3 scripts/docs/rebuild_indexes.py --root docs --check
```

Exit code 0 means indexes are up-to-date; non-zero means regeneration needed.

### Pull Request Requirements

- Pull requests that add new folders MUST include corresponding index.md files
- CI workflows will automatically regenerate indexes if missing or outdated
- Reviewers SHOULD verify that new folders have appropriate index files

### Compliance Verification

The documentation governance process includes verification that:

- All folders under docs/ have index.md files
- All folders under scripts/ have index.md files
- Index files contain required sections
- Index files accurately reflect folder contents

## Benefits

This policy ensures:

1. **Discoverability** - Users can browse documentation hierarchically
2. **Navigation** - Clear entry points into each documentation area
3. **Context** - Purpose and scope of each folder is documented
4. **Maintenance** - Automated updates keep indexes current
5. **Consistency** - Uniform structure across all documentation
6. **Quality** - Forces intentional organization of documentation

## Related Policies

- [Documentation Governance Policy](./documentation-governance.md) - Overall
  documentation governance framework
- [Document Formatting Policy](./document-formatting.md) - Standards for
  markdown formatting
- [Scripting Standards](./scripting-standards.md) - Standards for script
  documentation

## Compliance

**Status:** REQUIRED

**Effective Date:** 2026-01-09

**Review Cycle:** Annually

**Owner:** Documentation Team

## Metadata

- **Document Type:** policy
- **Compliance Level:** REQUIRED
- **Risk Level:** Low
- **Review Date:** 2027-01-09

## Revision History

| Date | Change | Author |
| --- | --- | --- |
| 2026-01-09 | Initial policy creation | GitHub Copilot |
